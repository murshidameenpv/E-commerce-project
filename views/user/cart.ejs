<%-include('includes/header')%>
<%-include('includes/navbar')%>

<section id="cart_page" class="cart pt-4 pb-4">
    <div class="container-xl">
        <div class="cart_2 row">
            <div class="col-md-6">
                <h5>MY CART</h5>
            </div>
        </div>
        <% if (!userCart || userCart.products.length===0) { %>
            <div class="empty-cart-message">
                <h2>Cart is empty</h2>
            </div>
            <% } else { %>
                <div class="cart_3 row mt-3">
                    <div class="col-md-8">
                        <div class="cart_3l">
                            <h6>PRODUCTS</h6>
                        </div>
                        <div class="cart_3l1 mt-3 row ms-0 me-0">
                            <% userCart.products.forEach((product)=> { %>
                                <div class="col-md-3 ps-0 col-3">
                                    <div class="cart_3l1i">
                                        <a href="/products/details/<%=product.productId._id%>"><img
                                                src="<%= product.productId.image.slice(-1)[0]%>" alt="abc"
                                                class="w-100"></a>
                                    </div>
                                </div>
                                <div class="col-md-9 col-9">
                                    <div class="cart_3l1i1">
                                        <h6 class="fw-bold"><a href="/products/details/<%=product.productId._id%>">
                                                <%= product.productId.productName %>
                                            </a>
                                        </h6>
                                        <h5 class="col_yell mt-3"><%= product.productId.price %>
                                        </h5>
                                        <h6 class="font_12 mt-3 mb-3">Quantity</h6>
                                    </div>
                                    <div class="cart_3l1i2">
                                        <input type="number" min="1" max="<%= product.productId.stock %>" value="<%= product.quantity %>"
                                            class="form-control" placeholder="Qty">
                                    </div>
                                    <div>
                                        <h6><a class="button_1 remove-cart-button"
                                                data-product-id="<%= product.productId._id %>"
                                                style="cursor: pointer;">REMOVE</a></h6>
                                    </div>
                                </div>
                                <% }) %>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="cart_3r">
                            <h6 class="head_1">SUBTOTAL</h6>
                            <h5 class="text-center col_yell mt-3" id="subTotal">$<%= total %>
                            </h5>
                            <hr>
                            <h6 class="text-center mt-3"><a class="button" href="/checkout">PROCEED TO CHECKOUT</a></h6>
                            <br>
                        </div>
                    </div>
                </div>
            <% } %>
    </div>
</section>
    

<%-include('includes/footer')%>